{% extends 'base.html' %} {% block body %} {% load static %}
<style>
  .sidebar-link {
    display: block;
    padding: 10px 15px;
    color: black;
    background-color: transparent;
    text-decoration: none;
    border-radius: 4px;
    transition: background-color 0.3s ease;
  }

  .sidebar-link:hover {
    background-color: yellow;
    color: black;
  }
</style>

<!-- Bootstrap CDN (if not already included) -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="container-fluid">
  <div class="row" style="min-height: 100vh">
    <!-- Sidebar -->
    <div class="col-lg-2 bg-light border-end py-4">
      <h5 class="text-center mb-4">Admin Panel</h5>
      <ul class="list-unstyled px-3">
        <li class="mb-2">
          <a href="{% url 'tasks:AdminDashboard' %}" class="sidebar-link"
            >Dashboard</a
          >
        </li>
        <li class="mb-2">
          <a href="{% url 'tasks:AdminProfilePage' %}" class="sidebar-link"
            >Profile</a
          >
        </li>
        <li class="mb-2">
          <a href="{% url 'tasks:task_list' %}" class="sidebar-link"
            >Last List</a
          >
        </li>
        <li class="mb-2">
          <a href="{% url 'tasks:logoutPage' %}" class="sidebar-link">Logout</a>
        </li>
      </ul>
    </div>

    <!-- Charts Area -->
    <div class="col-lg-10 p-4">
      <div class="row">
        <!-- Chart 1: Status -->
        <div class="col-lg-4 mb-4">
          <div class="card shadow rounded-4">
            <div class="card-body">
              <h5 class="text-center text-primary">Task Status Overview</h5>
              <canvas id="statusChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Chart 2: Priority -->
        <div class="col-lg-4 mb-4">
          <div class="card shadow rounded-4">
            <div class="card-body">
              <h5 class="text-center text-primary">Task Priority Statistics</h5>
              <canvas id="priorityChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Chart 3: Completion -->
        <div class="col-lg-4 mb-4">
          <div class="card shadow rounded-4">
            <div class="card-body">
              <h5 class="text-center text-primary">Task Completion Trend</h5>
              <canvas id="completionChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Chart JS Script -->
<script>
  // Chart 1: Task Status Overview (Pie)
  const statusChart = new Chart(document.getElementById('statusChart'), {
    type: 'pie',
    data: {
      labels: ['Pending', 'In Progress', 'Completed'],
      datasets: [{
        data: [{{ pending }}, {{ inprogress }}, {{ completed }}],
        backgroundColor: ['#f1c40f', '#1abc9c', '#2ecc71']
      }]
    }
  });

  // Chart 2: Task Priority Statistics (Bar)
  const priorityChart = new Chart(document.getElementById('priorityChart'), {
    type: 'bar',
    data: {
      labels: ['High', 'Medium', 'Low'],
      datasets: [{
        label: 'Task Priority',
        data: [{{ high }}, {{ medium }}, {{ low }}],
        backgroundColor: ['#e74c3c', '#f39c12', '#27ae60']
      }]
    },
    options: {
      plugins: {
        legend: { display: false }
      },
      scales: {
        y: { beginAtZero: true }
      }
    }
  });

  // Chart 3: Task Completion Trend (Bar)
  const completionChart = new Chart(document.getElementById('completionChart'), {
    type: 'bar',
    data: {
      labels: ['Pending', 'In Progress', 'Completed'],
      datasets: [{
        label: 'Task Completion',
        data: [{{ pending }}, {{ inprogress }}, {{ completed }}],
        backgroundColor: ['#f1c40f', '#1abc9c', '#2ecc71']
      }]
    },
    options: {
      plugins: {
        legend: { position: 'top' }
      },
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
</script>

{% endblock %}
